CREATE TABLE party (id BINARY(16) NOT NULL, version BIGINT NOT NULL, identity VARCHAR(30) NOT NULL, type VARCHAR(20) NOT NULL, name VARCHAR(30) NOT NULL, email VARCHAR(80) NULL, enabled BIT(1) NOT NULL, creation_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, modification_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (id), INDEX identity_idx (identity), INDEX type_idx (type), INDEX name_idx (name), INDEX enabled_idx (enabled), UNIQUE type_identity_idx (type, identity) );
CREATE TABLE party_rel (parent BINARY(16) NOT NULL, children BINARY(16) NOT NULL, PRIMARY KEY (parent, children), INDEX parent_idx (parent), INDEX children_idx (children), CONSTRAINT FK_party_rel_parent FOREIGN KEY (parent) REFERENCES party (id), CONSTRAINT FK_party_rel_children FOREIGN KEY (children) REFERENCES party (id));